(function(f){typeof define==="function"?define("stylefix",f):f()})(function(require,exports,module){"use strict";!function(e,t){function n(){}function r(t,n){n=n||S;var r=[];for(var o in b){var a,c,i=e;if(e[o]){for(a=b[o].replace("*",o).split(".");(c=a.shift())&&(i=i[c]););if("function"==typeof i)try{if(r=i(t,n),r&&r.length)break}catch(s){}}}try{r=r&&r.length?r:n.querySelectorAll(t)}catch(s){/^\w+$/.test(t)&&n.getElementsByTagName(t)}return[].slice.call(r,0)}function o(t,r,a){N=!1;var c,i,s,l,u,f,d=/^\w+:\/\/[^\/]+/;if(a=a||n,u=C[t])E(function(){r(u)},0);else if(l=O[t])l.push(r);else{O[t]=[r],c=M?new M:new ActiveXObject("Microsoft.XMLHTTP"),c.onreadystatechange=function(){4===c.readyState&&s()},s=function(){var e=c.responseText.replace(/(^\s+|\s+$)/g,"");e&&(!c.status||c.status<400||c.status>600)?(C[t]=e,O[t].forEach(function(t){t(e)})):a(c)};try{c.open("GET",t),c.send()}catch(y){q?(c=new q,c.onerror=a,c.onprogress=n,c.onload=s,c.open("GET",t),c.send()):(f=function(e){M=(i||e).XMLHttpRequest,o(t,r,a)},(i=e.mOxie)?f():require?require.async(["mOxie"],f):d.test(t)?o(t.replace(d,""),r,a):a(c))}}}function a(e,n){var r=e.textContent;return n===t?r||(e.textContent=e.innerText):(e.styleSheet&&n!==r&&(e.styleSheet.cssText=n),void(e.textContent=n))}function c(e,t){t=t||{};var n=e.replace(/[^\/]+$/,""),r=(/^[a-z]{3,10}:/.exec(n)||[""])[0],c=(/^[a-z]{3,10}:\/\/[^\/]+/.exec(n)||[""])[0],i=/^([^?]*)\??/.exec(e)[1],s=t.style||S.createElement("style"),l=t.callback,u=t.after;o(e,function(t){n&&(t=t.replace(/url\(\s*?((?:"|')?)(.+?)\1\s*?\)/gi,function(e,t,o){return/^([a-z]{3,10}:|#)/i.test(o)?e:/^\/\//.test(o)?'url("'+r+o+'")':/^\//.test(o)?'url("'+c+o+'")':/^\?/.test(o)?'url("'+i+o+'")':'url("'+n+o+'")'}));var o=n.replace(/([\\\^\$*+[\]?{}.=!:(|)])/g,"\\$1");t=t.replace(new RegExp("\\b(behavior:\\s*?url\\('?\"?)"+o,"gi"),"$1"),v=s,s.setAttribute("data-href",e),u&&u.parentNode?u.parentNode.insertBefore(s,u.nextSibling):S.documentElement.childNodes[0].appendChild(s),t=d(t,!0,s),a(s,t),l&&l(s),v=null},function(){if(!u){var t=S.createElement("link");t.rel="stylesheet",t.href=e,S.documentElement.childNodes[0].appendChild(t)}})}function i(e){function t(){var t=e.href,n=o.style,r=e.parentNode;!n||r&&n.getAttribute("data-href")===t||(n.remove?n.remove():n.parentNode&&n.parentNode.removeChild(n)),r&&c(t,o)}function n(){clearTimeout(r),r=E(t,0)}var r,o={callback:function(t){t.media=e.media,t.disabled=e.disabled,o.style=t},after:e};!e[A]&&/^stylesheet$/i.test(e.rel)&&(t(),h(e,"DOMAttrModified",n),h(e,"DOMNodeRemoved",n),e.attachEvent&&e.attachEvent("onpropertychange",n))}function s(e){var t=e.disabled;a(e,d(a(e),!0,e)),e.disabled=t}function l(e){var t,n;8>T?(t=e.style.cssText,n=d(t,!1,e),t!==n&&(e.style.cssText=n)):(t=e.getAttribute("style"),n=d(t,!1,e),t!==n&&e.setAttribute("style",n))}function u(){x.length>1?(r("link").forEach(i),r("style").forEach(s),r("[style]").forEach(l),h(S,"DOMNodeInserted",function(e){var t=e.target;switch(t.tagName){case"STYLE":t!==v&&s(t);break;case"LINK":/^stylesheet$/i.test(t.rel)&&i(t);break;default:t.style&&l(t)}})):E(u,50)}function f(e,n){x.splice(n===t?x.length:n,0,e)}function d(e,t,n){return x.forEach(function(r){e=r(e,t,n)||e}),e}function y(){p(function(){w.forEach(function(e){e()}),E(u,0)})}function h(e){var t=e.addEventListener;return t?(t.apply(e,[].slice.call(arguments,1)),!0):void 0}function p(t){function n(){k||(k=!0,t())}try{return $(n)}catch(r){}if(m())E(n,0);else if(!h(S,"DOMContentLoaded",n)){S.attachEvent("onreadystatechange",function(){m()&&n()});var o;try{o=!e.frameElement&&S.documentElement}catch(a){}o&&o.doScroll&&!function c(){if(!k){try{o.doScroll("left")}catch(e){return E(c,50)}n()}}()}}function m(){return/^(complete|interactive)$/.test(S.readyState)}var v,g,E=e.setTimeout,b={NW:"*.Dom.select",MooTools:"$$",DOMAssistant:"*.$",Prototype:"$$",YAHOO:"*.util.Selector.query",Sizzle:"*",jQuery:"*",dojo:"*.query"},x=[function(e){return e.replace(/(\/\*[^*]*\*+([^\/][^*]*\*+)*\/)\s*?/g,"")}],S=e.document,q=e.XDomainRequest,M=e.XMLHttpRequest,T=S.querySelector?S.documentMode:"CSS1Compat"===S.compatMode?"XMLHttpRequest"in e?7:6:5,N=S.querySelector||q,A="data-ignore",C={},O={},w=[],k=!1;require&&![].filter?require.async(["es5-shim"],y):y(),g={query:r,get:o,cssContent:a,load:c,linkElement:i,styleElement:s,styleAttribute:l,ieVersion:T,process:u,register:f,fix:d,ready:function(e){k?e():w.push(e)}};try{module.exports=g}catch(L){e.stylefix=g}}(window);});