(function(f){typeof define==="function"?define("stylefix",f):f()})(function(require,exports,module){"use strict";!function(e,t){function n(){}function r(t,n){n=n||q;var r=[];for(var a in S){var o,c,i=e;if(e[a]){for(o=S[a].replace("*",a).split(".");(c=o.shift())&&(i=i[c]););if("function"==typeof i)try{if(r=i(t,n),r&&r.length)break}catch(s){}}}try{r=r&&r.length?r:n.querySelectorAll(t)}catch(s){/^\w+$/.test(t)&&n.getElementsByTagName(t)}return[].slice.call(r,0)}function a(t,r,o){O=!1;var c,i,s,l,u,f,d=/^\w+:\/\/[^\/]+/;if(o=o||n,u=k[t])b(function(){r(u)},0);else if(l=L[t])l.push(r);else{L[t]=[r],c=C?new C:new ActiveXObject("Microsoft.XMLHTTP"),c.onreadystatechange=function(){4===c.readyState&&s()},s=function(){var e=c.responseText.replace(/(^\s+|\s+$)/g,"");e&&(!c.status||c.status<400||c.status>600)?(k[t]=e,L[t].forEach(function(t){t(e)})):o(c)};try{c.open("GET",t),c.send()}catch(y){N?(c=new N,c.onerror=o,c.onprogress=n,c.onload=s,c.open("GET",t),c.send()):(f=function(e){C=(i||e).XMLHttpRequest,a(t,r,o)},(i=e.mOxie)?f():require?require.async(["mOxie"],f):d.test(t)?a(t.replace(d,""),r,o):o(c))}}}function o(e,n){var r=e.textContent;return n===t?r||(e.textContent=e.innerText):(e.styleSheet&&n!==r&&(e.styleSheet.cssText=n),void(e.textContent=n))}function c(e,t){t=t||{};var n=e.replace(/[^\/]+$/,""),r=(/^[a-z]{3,10}:/.exec(n)||[""])[0],c=(/^[a-z]{3,10}:\/\/[^\/]+/.exec(n)||[""])[0],i=/^([^?]*)\??/.exec(e)[1],s=t.style||q.createElement("style"),l=t.callback,u=t.after;a(e,function(t){n&&(t=t.replace(/url\(\s*?((?:"|')?)(.+?)\1\s*?\)/gi,function(e,t,a){return/^([a-z]{3,10}:|#)/i.test(a)?e:/^\/\//.test(a)?'url("'+r+a+'")':/^\//.test(a)?'url("'+c+a+'")':/^\?/.test(a)?'url("'+i+a+'")':'url("'+n+a+'")'}));var a=n.replace(/([\\\^\$*+[\]?{}.=!:(|)])/g,"\\$1");t=t.replace(new RegExp("\\b(behavior:\\s*?url\\('?\"?)"+a,"gi"),"$1"),E=s,s.setAttribute("data-href",e),u&&u.parentNode?u.parentNode.insertBefore(s,u.nextSibling):q.documentElement.childNodes[0].appendChild(s),t=f(t,!0,s),o(s,t),l&&l(s),E=null},function(){if(!u){var t=q.createElement("link");t.rel="stylesheet",t.href=e,q.documentElement.childNodes[0].appendChild(t)}})}function i(e){function t(){var t=e.href,n=o.style,a=e.parentNode;!n||a&&n.getAttribute("data-href")===t||(n.remove?n.remove():n.parentNode&&n.parentNode.removeChild(n)),a&&(n||(n=e[w],n&&n.parentNode||r('style[data-href="'+t+'"]')[0],o.style=n),c(t,o))}function n(){clearTimeout(a),a=b(t,0)}var a,o={callback:function(t){t.media=e.media,t.disabled=e.disabled,e[w]=o.style=t},after:e};/^stylesheet$/i.test(e.rel)&&(t(),y(e,"DOMAttrModified",n),y(e,"DOMNodeRemoved",n),e.attachEvent&&e.attachEvent("onpropertychange",n))}function s(e){if(!e.getAttribute("data-href")){var t=e.disabled;o(e,f(o(e),!0,e)),e.disabled=t}}function l(){T.length>1?(r("link").forEach(i),r("style").forEach(s),r("[style]").forEach(v),y(q,"DOMNodeInserted",function(e){var t=e.target;switch(t.tagName){case"STYLE":t!==E&&s(t);break;case"LINK":/^stylesheet$/i.test(t.rel)&&i(t);break;default:t.style&&v(t)}})):b(l,50)}function u(e,n){T.splice(n===t?T.length:n,0,e)}function f(e,t,n){return T.forEach(function(r){e=r(e,t,n)||e}),e}function d(){p(function(){D.forEach(function(e){e()}),b(l,0)})}function y(e){var t=e.addEventListener;return t?(t.apply(e,[].slice.call(arguments,1)),!0):void 0}function h(e){g||(g=q.createElement("style")),E=g,M.insertBefore(g,M.firstChild),g.styleSheet?g.styleSheet.cssText+=e:g.textContent+=e,E=null}function p(t){function n(){R||(R=!0,t())}try{return $(n)}catch(r){}if(m())b(n,0);else if(!y(q,"DOMContentLoaded",n)){q.attachEvent("onreadystatechange",function(){m()&&n()});var a;try{a=!e.frameElement&&q.documentElement}catch(o){}a&&a.doScroll&&!function c(){if(!R){try{a.doScroll("left")}catch(e){return b(c,50)}n()}}()}}function m(){return/^(complete|interactive)$/.test(q.readyState)}var v,g,E,x,b=e.setTimeout,S={NW:"*.Dom.select",MooTools:"$$",DOMAssistant:"*.$",Prototype:"$$",YAHOO:"*.util.Selector.query",Sizzle:"*",jQuery:"*",dojo:"*.query"},T=[function(e){return e.replace(/(\/\*[^*]*\*+([^\/][^*]*\*+)*\/)\s*?/g,"")}],q=e.document,M=q.head||q.documentElement.children[0],N=e.XDomainRequest,C=e.XMLHttpRequest,A=q.querySelector?q.documentMode:"CSS1Compat"===q.compatMode?"XMLHttpRequest"in e?7:6:5,O=q.querySelector||N,w="data-style",k={},L={},D=[];v=8>A?function(e){var t,n;t=e.style.cssText,n=f(t,!1,e),t!==n&&(e.style.cssText=n)}:function(e){var t,n;t=e.getAttribute("style"),t&&(n=f(t,!1,e),t!==n&&e.setAttribute("style",n))};var R=!1;require&&![].filter?require.async(["es5-shim"],d):d(),x={query:r,get:a,cssContent:o,load:c,addRestCss:h,linkElement:i,styleElement:s,styleAttribute:v,ieVersion:A,process:l,register:u,fix:f,ready:function(e){R?e():D.push(e)}};try{module.exports=x}catch(X){e.stylefix=x}}(window);});